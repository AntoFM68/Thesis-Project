<mujoco model="turtlebot">
    <compiler angle="radian" />
    <size njmax="500" nconmax="100" nuserdata="100" nuser_actuator="8" />

    <default>
        <geom condim="6" density="5" rgba="1 0 0 1" size=".05" type="sphere"/>
        <joint damping=".001"/>
        <motor ctrlrange="-1 1" ctrllimited="true" forcerange="-.02 .02" forcelimited="true"/>
        <site size="0.032" type="sphere"/>
    </default>

    <asset>
        <texture builtin="gradient" height="100" rgb1=".4 .5 .6" rgb2="0 0 0" type="skybox" width="100" />
        <texture builtin="flat" height="1278" mark="cross" markrgb="1 1 1" name="texgeom" random="0.01" rgb1="0.8 0.6 0.4" rgb2="0.8 0.6 0.4" type="cube" width="127" />
        <texture builtin="checker" height="100" name="texplane" rgb1="0 0 0" rgb2="0.8 0.8 0.8" type="2d" width="100" />
        <material name="MatPlane" reflectance="0.5" shininess="1" specular="1" texrepeat="60 60" texture="texplane" />
        <material name="geom" texture="texgeom" texuniform="true" />
    </asset>

    <worldbody>
        <light cutoff="100" diffuse="1 1 1" dir="-0 0 -1.3" directional="true" exponent="1" pos="0 0 1.3" specular=".1 .1 .1" />
        <geom condim="6" material="MatPlane" name="floor" pos="0 0 0" rgba="0.8 0.9 0.8 1" size="20 20 .125" type="plane" />

        <body name="turtlebot" pos="0 0 0.02">
            <joint type="free" />
            <site name="turtlebot" pos="0 0 0"/>
            <geom size="0.176 0.05469" pos="0 0 0.05949" type="cylinder" rgba="1 1 1 1" />
            <geom size="0.006 0.0246" pos="0.12 0.082 0.1028" type="cylinder" rgba="1 1 1 1" />
            <geom size="0.006 0.0246" pos="0.055 0.12 0.1028" type="cylinder" rgba="1 1 1 1" />
            <geom size="0.006 0.0246" pos="-0.055 0.12 0.1028" type="cylinder" rgba="1 1 1 1" />
            <geom size="0.006 0.0246" pos="0.12 -0.082 0.1028" type="cylinder" rgba="1 1 1 1" />
            <geom size="0.006 0.0246" pos="0.055 -0.12 0.1028" type="cylinder" rgba="1 1 1 1" />
            <geom size="0.006 0.0246" pos="-0.055 -0.12 0.1028" type="cylinder" rgba="1 1 1 1" />
            <geom size="0.133635 0.17 0.003" pos="0.02364 0 0.1306" type="box" rgba="1 1 1 1" />
            <geom size="0.006 0.0304" pos="0.0381 0.1505 0.164" type="cylinder" rgba="1 1 1 1" />
            <geom size="0.006 0.0304" pos="0.0381 -0.1505 0.164" type="cylinder" rgba="1 1 1 1" />
            <geom size="0.006 0.0304" pos="-0.0381 0.1505 0.164" type="cylinder" rgba="1 1 1 1" />
            <geom size="0.006 0.0304" pos="-0.0381 -0.1505 0.164" type="cylinder" rgba="1 1 1 1" />
            <geom size="0.143635 0.17 0.003" pos="-0.01364 0 0.1874" type="box" rgba="1 1 1 1" />
            <geom size="0.006 0.1016" pos="0.0381 0.1505 0.292" type="cylinder" rgba="1 1 1 1" />
            <geom size="0.006 0.1016" pos="0.0381 -0.1505 0.292" type="cylinder" rgba="1 1 1 1" />
            <geom size="0.006 0.1016" pos="-0.0381 0.1505 0.292" type="cylinder" rgba="1 1 1 1" />
            <geom size="0.006 0.1016" pos="-0.0381 -0.1505 0.292" type="cylinder" rgba="1 1 1 1" />
            <geom size="0.006 0.0468" pos="-0.1024 0.098 0.2372" type="cylinder" rgba="1 1 1 1" />
            <geom size="0.006 0.0468" pos="-0.1024 -0.098 0.2372" type="cylinder" rgba="1 1 1 1" />
            <geom size="0.143635 0.17 0.003" pos="-0.01364 0 0.3966" type="box" rgba="1 1 1 1" />
            <geom size="0.036355 0.13897 0.0365" pos="-0.1495 0 0.254" type="box" rgba="1 1 1 1" />
            <body name="front_w" pos="0.115 0 0.007" >
                <joint type="ball"/>
                <geom size="0.017 0.0088" quat="0.707107 -0.707107 0 0" type="sphere" condim="6" />
            </body>
            <body name="rear_w" pos="-0.135 0 0.009" >
                <joint type="ball"/>
                <geom size="0.017 0.0088" quat="0.707107 -0.707107 0 0" type="sphere" condim="6" />
            </body>
            <body name="wheel_left_link" pos="0 0.115 0.025" quat="0.707107 -0.707107 0 0">
                <joint name="wheel_left_joint" type="hinge" pos="0 0 0" axis="0 0 1" damping="0.001" />
                <geom size="0.0352 0.0103" type="cylinder" rgba="1 1 1 1" condim="6" />
            </body>
            <body name="wheel_right_link" pos="0 -0.115 0.025" quat="0.707107 -0.707107 0 0">
                <joint name="wheel_right_joint" type="hinge" pos="0 0 0" axis="0 0 1" damping="0.001" />
                <geom size="0.035 0.0103" type="cylinder" rgba="1 1 1 1" condim="6" />
            </body>
        </body>
    </worldbody>

	<actuator>
		<motor gear="1" ctrllimited="true" ctrlrange="-1 1" forcelimited="true" forcerange='-0.02 0.02' joint="wheel_left_joint" name="blw_motor" />
		<motor gear="1" ctrllimited="true" ctrlrange="-1 1" forcelimited="true" forcerange='-0.02 0.02' joint="wheel_right_joint" name="brw_motor" />
        <!-- PID implementation below. gainprm: kp, ti, iclamp, td, dsmooth, 0-->
        <!-- <general joint="wheel_left_joint" name="RRD" ctrllimited="true" ctrlrange='-1 1' forcelimited="true" forcerange='-0.2 0.2' gaintype="user" biastype="user"  gainprm="0.07 0.0 .00 0.01 0.01 0" /> -->
	    <!-- <general joint="wheel_right_joint" name="RLD" ctrllimited="true" ctrlrange='-1 1' forcelimited="true" forcerange='-0.2 0.2' gaintype="user" biastype="user"  gainprm="0.07 0.0 .00 0.01 0.01 0" /> -->

	</actuator>
    <sensor>
        <!-- Used for observation -->
        <accelerometer site="turtlebot" name="accelerometer"/>
        <velocimeter site="turtlebot" name="velocimeter"/>
        <gyro site="turtlebot" name="gyro"/>
        <magnetometer site="turtlebot" name="magnetometer"/>
    </sensor>

</mujoco>
